.data
	register:
		IR:0x0000000000000000
		R1:0x0000000000000000
		R2:0x0000000000000000
		SZ:0x0000000000000008
	instruction_stream:
		0x00009055
		0x00008080
		0x00009034
		0xFF00FF00
		0x00009088
		0x00009791
		0x00009088
		0x00009055
.text
	MOV	ECX,0
	MOV	EAX,[WORD PTR][instruction_stream+ECX]
	CMP	EAX,00009055
	CALL	INS1
	CMP	EAX,00008080
	CALL	INS2
	CMP	EAX,00009034
	CALL	INS3
	CMP	EAX,00009088
	CALL	INS4
	CMP	EAX,00009791
	CALL	INS5
	INC	ECX
	CMP	ECX,[SZ]
	JNE	.text
	JMP	EXIT
INS1:
	NOP
	RET
INS2:
	MOV	EDX,[R1]
	MOV	[R2],EDX
	RET
INS3:
	INC	ECX
	MOV	EAX,[WORD PTR][instruction_stream+ECX]
	JMP	[EAX]
	RET
INS4:
	MOV	EDX,[R1]
	INC	EDX
	MOV	[R1],EDX
	MOV	EDX,[R2]
	INC	EDX
	MOV	[R2],EDX
	RET
INS5:
	INC	ECX
	MOV	EBX,[WORD PTR][instruction_stream+ECX]
	INC	ECX
	MOV	EDX,[WORD PTR][instruction_stream+ECX]
	CMP	ECX,EDX
	RET

